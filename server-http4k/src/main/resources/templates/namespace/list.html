<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.w3.org/1999/xhtml"
      layout:decorate="~{layout}"
      lang="en">
<head>
    <title>KotLink - Namespaces</title>
</head>
<body>
<main layout:fragment="content">
    <!--/*@thymesVar id="model" type="org.kotlink.framework.ui.UiViewModel"*/-->
    <!--/*@thymesVar id="namespaces" type="java.util.List<org.kotlink.domain.namespace.Namespace>"*/-->

    <a class="mdc-button mdc-button--outlined new-namespace-button" th:href="@{'~/ui/namespace/new'}">
        <i class="material-icons mdc-button__icon" aria-hidden="true">add</i>
        New Namespace
    </a>

    <div class="mdc-data-table" data-mdc-auto-init="MDCDataTable">
        <div class="mdc-data-table__table-container">
            <table class="mdc-data-table__table" aria-label="Dessert calories">
                <thead>
                    <tr class="mdc-data-table__header-row">
                        <th class="mdc-data-table__header-cell icon-column" role="columnheader" scope="col"></th>
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Link Prefix</th>
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Description</th>
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Owner</th>
                        <th class="mdc-data-table__header-cell icon-column" role="columnheader" scope="col"></th>
                    </tr>
                </thead>
                <tbody class="mdc-data-table__content">
                    <tr th:each="namespace: ${namespaces}"
                        th:title="${namespace.description}"
                        class="mdc-data-table__row">
                        <th class="mdc-data-table__cell">
                            <a th:href="@{'~/ui/namespace/' + ${namespace.id} + '/edit'}"
                               class="mdc-icon-button material-icons">
                                <div class="mdc-icon-button__ripple"></div>
                                edit
                            </a>
                        </th>
                        <th class="mdc-data-table__cell" scope="row">
                            <span th:if="${namespace.linkPrefix.isEmpty()}"
                                  class="go-link"
                                  style="font-style: italic">(default)</span>
                            <span th:unless="${namespace.linkPrefix.isEmpty()}"
                                  class="go-link"
                                  th:text="${namespace.linkPrefix}"></span>
                        </th>
                        <td class="mdc-data-table__cell">
                            <span th:if="${namespace.description.isEmpty()}">-</span>
                            <span th:unless="${namespace.description.isEmpty()}" th:text="${namespace.description}"></span>
                        </td>
                        <td class="mdc-data-table__cell">
                            <span th:text="${namespace.ownerEmail}"></span>
                        </td>
                        <td class="mdc-data-table__cell">
                            <form th:action="@{'~/ui/namespace/' + ${namespace.id} + '/delete'}"
                                  method="post"
                                  th:unless="${namespace.linkPrefix.isEmpty()}">
                                <button class="mdc-icon-button material-icons"
                                        th:data-link-prefix="${namespace.linkPrefix}"
                                        onclick="const linkPrefix = dataset.linkPrefix; return confirm(`Are you sure that you want to delete namespace ${linkPrefix}?`)">
                                    <div class="mdc-icon-button__ripple"></div>
                                    delete
                                </button>
                            </form>
                            <button class="mdc-icon-button material-icons"
                                    aria-pressed="false"
                                    disabled
                                    th:if="${namespace.linkPrefix.isEmpty()}">
                                <div class="mdc-icon-button__ripple"></div>
                                delete
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</main>
</body>
</html>